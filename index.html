<!DOCTYPE html>
<html>

<head>
    <title>AR Museum</title>
    <script src="https://aframe.io/releases/1.2.0/aframe.min.js"></script>
    <script src="https://cdn.rawgit.com/jeromeetienne/AR.js/1.7.2/aframe/build/aframe-ar.js"></script>
</head>

<body style="margin: 0; overflow: hidden;">
    <a-scene embedded arjs>
        <a-assets>
            <audio id="sound1" src="./Metallica_ Nothing Else Matters (Official Music Video).mp3"></audio>
            <audio id="sound2" src="./Panteón Rococó - El Último Ska.mp3"></audio>
        </a-assets>

        <!-- Marcador Hiro -->
        <a-marker preset="hiro">
            <a-box position="0 0.5 0" material="color: red;"></a-box>
            <a-entity sound="src: #sound1" autoplay="false" id="audio1"></a-entity>
        </a-marker>

        <!-- Marcador Kanji -->
        <a-marker preset="kanji">
            <a-sphere position="0 0.5 0" radius="0.5" material="color: blue;"></a-sphere>
            <a-entity sound="src: #sound2" autoplay="false" id="audio2"></a-entity>
        </a-marker>

        <a-entity camera></a-entity>
    </a-scene>
    <script>
        AFRAME.registerComponent('soundhandler', {
            init: function () {
                this.el.addEventListener('markerFound', () => {
                    this.playSound();
                });
                this.el.addEventListener('markerLost', () => {
                    this.pauseSound();
                });
            },
            playSound: function () {
                let audio = document.querySelector(this.el.getAttribute('sound').src);
                audio.play();
            },
            pauseSound: function () {
                let audio = document.querySelector(this.el.getAttribute('sound').src);
                audio.pause();
                audio.currentTime = 0;
            }
        });

        document.querySelector('#audio1').setAttribute('soundhandler', '');
        document.querySelector('#audio2').setAttribute('soundhandler', '');
    </script>
</body>

</html>